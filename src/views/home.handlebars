<h1>Alma inciensos</h1>

{{#if user}}
  <div class="saludo">
    <h1>Hola {{user.name}} ! </h1>
    <p>Rol: {{user.role}}</p>
  </div>
  <div class="logoutContainer">
    <button id="loguotButton">Logout</button>
  </div>

{{/if}}

<div id="controles">
  <form action="/" method="GET">
    <div id="labels">

      <label for="limit"></label>

      <select
        name="limit"
        id="limit"
        class="form-select"
        aria-label="Default select example"
      >
        <option value="5">Cantidad de productos</option>
        <option value="1">1</option>
        <option value="3">3</option>
        <option value="5">5</option>
      </select>

      <label for="sort"></label>
      <select
        name="sort"
        id="sort"
        class="form-select"
        aria-label="Default select example"
      >
        <option value="1">Ordenar por:</option>
        <option value="1">Menor precio</option>
        <option value="-1">Mayor precio</option>
      </select>
    </div>
    <button type="submit" class="btn btn-outline-secondary aplicar">Aplicar
      cambios</button>
  </form>
</div>

<div id="contenedorPricipal">
  <div id="product-container">
    {{#each products}}
      <div class="card mb-3" style="max-width: 540px;">
        <div class="row g-0">
          <div class="col-md-4">
            <img src="{{thumbnail}}" alt="{{title}}" class="img-fluid rounded-start" />
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">{{title}}</h5>
              <p class="category">{{category}}</p>
              <p class="card-text card-text-description">{{description}}</p>
              <p class="card-text"><small class="text-muted">$
                  {{price}}</small></p>
              <button id="{{_id}}" class="add-to-cart-button btn btn-outline-secondary">Agrecar al carrito</button>
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </div>

  <div id="pageHandler">
    {{#if hasPrevPage}}
      <a href="/?page={{prevPage}}"><button> - </button></a>
    {{/if}}

    <p>{{page}}</p>

    {{#if hasNextPage}}
      <a href="/?page={{nextPage}}"><button> + </button></a>
    {{/if}}
  </div>

</div>

<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
  crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/js/productHandler.js"></script>
<script src="/js/logout.js"></script>